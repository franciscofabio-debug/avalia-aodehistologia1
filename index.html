<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Interativo de Histologia</title>
    <!-- Carrega o Tailwind CSS para estiliza√ß√£o moderna e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configura√ß√£o do Tailwind para usar a fonte Inter e cores customizadas -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#10567A',
                        'secondary-yellow': '#F4E0A5',
                        'correct-green': '#10B981',
                        'wrong-red': '#EF4444',
                        'gray-bg': '#F7F7F7',
                        'whatsapp-green': '#25D366',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Estilo customizado para bot√µes de op√ß√£o */
        .option-button {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        .option-button:hover:not([disabled]) {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(16, 86, 122, 0.2), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        /* Estilo para a barra de progresso */
        .progress-bar {
            transition: width 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans min-h-screen flex items-center justify-center p-4">

    <!-- Container Principal do Quiz -->
    <div id="quiz-container" class="bg-white rounded-xl shadow-2xl w-full max-w-2xl p-6 md:p-10 border-t-4 border-primary-blue">
        <h1 class="text-3xl font-extrabold text-primary-blue mb-4 text-center">Histologia Quiz</h1>
        <p class="text-center text-gray-500 mb-8">20 Quest√µes sobre M√©todos, Microscopia e Tecidos.</p>

        <!-- √Årea de Progresso e Pergunta -->
        <div id="quiz-area" class="space-y-6 hidden">
            <!-- Progresso -->
            <div class="mb-6">
                <p id="progress-text" class="text-sm font-medium text-primary-blue mb-2"></p>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="progress-bar bg-primary-blue h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>

            <!-- Pergunta -->
            <div class="bg-primary-blue/10 p-5 rounded-lg border-l-4 border-primary-blue">
                <p id="question-text" class="text-lg font-semibold text-gray-800"></p>
            </div>

            <!-- Op√ß√µes de Resposta -->
            <div id="options-container" class="space-y-3">
                <!-- Bot√µes de op√ß√£o ser√£o injetados aqui -->
            </div>

            <!-- Bot√£o de Pr√≥xima Pergunta -->
            <div class="flex justify-end">
                <button id="next-button" class="mt-4 px-6 py-2 bg-primary-blue text-white font-bold rounded-full hover:bg-primary-blue/90 transition-all shadow-md hidden" onclick="closeFeedback()">Pr√≥xima Pergunta &rarr;</button>
            </div>
        </div>

        <!-- Tela de Resultado Final (Conte√∫do din√¢mico ser√° injetado) -->
        <div id="result-screen" class="text-center hidden p-8">
            <!-- Conte√∫do de resultado ser√° gerado dinamicamente em showResults() -->
        </div>

        <!-- Feedback de Resposta -->
        <div id="feedback-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" onclick="closeFeedback()">
            <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 space-y-4" onclick="event.stopPropagation()">
                <h3 id="feedback-title" class="text-2xl font-bold"></h3>
                <p id="feedback-explanation" class="text-gray-600 text-sm leading-relaxed whitespace-pre-line"></p>
                <button class="w-full py-2 bg-primary-blue text-white font-bold rounded-lg hover:bg-primary-blue/90 transition-all" onclick="closeFeedback()">Continuar</button>
            </div>
        </div>

        <!-- Tela Inicial e Cadastro (Inicialmente vis√≠vel) -->
        <div id="start-screen" class="text-center p-8">
            <h2 class="text-2xl font-semibold text-gray-700 mb-6">Cadastro do Aluno</h2>
            <p class="text-gray-600 mb-6">Preencha seus dados para iniciar o teste de Histologia:</p>
            
            <div class="space-y-4 mb-8">
                <input type="text" id="student-name" placeholder="Seu Nome Completo" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary-blue focus:border-primary-blue transition-all" required>
                <input type="text" id="student-id" placeholder="Matr√≠cula ou Turma (Opcional)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary-blue focus:border-primary-blue transition-all">
                <p id="start-error-message" class="text-wrong-red text-sm font-medium hidden">O nome √© obrigat√≥rio.</p>
            </div>

            <button class="px-8 py-3 bg-primary-blue text-white font-bold rounded-full text-xl hover:bg-primary-blue/90 transition-all shadow-lg" onclick="handleStart()">Iniciar Quiz</button>
        </div>

    </div>

    <script>
        const questions = [
            // 1. M√©todos Histol√≥gicos de Estudo (4 quest√µes)
            {
                question: "Qual t√©cnica histol√≥gica √© essencial para permitir o corte de tecidos em fatias finas (micr√¥metros) pelo micr√≥tomo?",
                options: ["Fixa√ß√£o", "Colora√ß√£o", "Clarifica√ß√£o (Diafaniza√ß√£o)", "Inclus√£o"],
                answer: "Inclus√£o",
                explanation: "A inclus√£o, geralmente em parafina, fornece o suporte e a rigidez necess√°rios para que o tecido possa ser cortado em sec√ß√µes finas para a microscopia."
            },
            {
                question: "O formalde√≠do, o fixador mais comum, atua primariamente formando liga√ß√µes cruzadas entre qual tipo de mol√©cula no tecido?",
                options: ["Lip√≠dios", "Carboidratos", "√Åcidos Nucleicos", "Prote√≠nas"],
                answer: "Prote√≠nas",
                explanation: "O formalde√≠do (formalina) reage com os grupos amino das prote√≠nas, ligando-as entre si (cross-linking), o que preserva a estrutura celular e tecidual."
            },
            {
                question: "Qual solvente √© utilizado na etapa de clarifica√ß√£o (diafaniza√ß√£o) para remover a parafina do tecido ap√≥s o corte e antes da colora√ß√£o?",
                options: ["√Ålcool Et√≠lico", "√Ågua Destilada", "√âter", "Xilol ou Hemo-D"],
                answer: "Xilol ou Hemo-D",
                explanation: "O xilol √© o solvente mais comum. Ele remove a parafina, sendo misc√≠vel com ela e com os corantes lipossol√∫veis (se usados). √â uma etapa de 'desparafinagem'."
            },
            {
                question: "Qual das seguintes etapas √© revers√≠vel na prepara√ß√£o de l√¢minas histol√≥gicas?",
                options: ["Fixa√ß√£o", "Desidrata√ß√£o", "Inclus√£o", "Montagem em lam√≠nula"],
                answer: "Desidrata√ß√£o",
                explanation: "A desidrata√ß√£o (remo√ß√£o da √°gua por √°lcool) √© seguida pela re-hidrata√ß√£o antes da colora√ß√£o. As outras etapas, especialmente a fixa√ß√£o e inclus√£o, alteram o tecido permanentemente."
            },
            // 2. Colora√ß√£o de Hematoxilina e Eosina (H.E.) (4 quest√µes)
            {
                question: "Estruturas que s√£o atra√≠das por corantes b√°sicos (como a Hematoxilina) s√£o chamadas de:",
                options: ["Acid√≥filas", "Eosin√≥filas", "Neutr√≥filas", "Bas√≥filas"],
                answer: "Bas√≥filas",
                explanation: "Estruturas bas√≥filas possuem carga negativa (√°cidas), como o DNA e o RNA, por isso se ligam a corantes b√°sicos (positivos), como a Hematoxilina (roxo/azul)."
            },
            {
                question: "Qual estrutura celular se cora em tons de rosa-avermelhado (acid√≥fila) pela Eosina devido √† alta concentra√ß√£o de prote√≠nas citoplasm√°ticas?",
                options: ["O n√∫cleo", "A cromatina", "O nucl√©olo", "O citoplasma"],
                answer: "O citoplasma",
                explanation: "A Eosina √© um corante √°cido (carga negativa) que se liga √†s prote√≠nas citoplasm√°ticas (que possuem grupos amino carregados positivamente), tingindo o citoplasma de rosa."
            },
            {
                question: "O col√°geno, uma prote√≠na fibrosa da matriz extracelular, √© tipicamente corado de qual cor na colora√ß√£o H.E.?",
                options: ["Azul escuro", "Preto", "Verde", "Rosa forte ou vermelho claro"],
                answer: "Rosa forte ou vermelho claro",
                explanation: "O col√°geno √© acid√≥filo e se liga fortemente √† Eosina, apresentando-se em tons de rosa a vermelho. √â um marcador importante do tecido conjuntivo."
            },
            {
                question: "Se uma c√©lula est√° envolvida ativamente na s√≠ntese proteica (muito RNA ribossomal), como o citoplasma dessa c√©lula aparecer√° na colora√ß√£o H.E.?",
                options: ["Intensamente rosa (acid√≥filo)", "Transparente", "Com colora√ß√£o mista", "Levemente azulado (bas√≥filo)"],
                answer: "Levemente azulado (bas√≥filo)",
                explanation: "O RNA ribossomal √© um √°cido nucleico (bas√≥filo) e atrai a Hematoxilina. O citoplasma de c√©lulas secretoras ativas apresenta-se, portanto, bas√≥filo."
            },
            // 3. Partes de um Microsc√≥pio de Luz (3 quest√µes)
            {
                question: "Qual componente do microsc√≥pio √© respons√°vel por conter as lentes que fornecem o aumento final da imagem, al√©m de ser o local onde o observador coloca os olhos?",
                options: ["Objetivas", "Platina", "Condensador", "Oculares"],
                answer: "Oculares",
                explanation: "As oculares s√£o as lentes mais pr√≥ximas dos olhos e, juntamente com as objetivas, determinam o aumento total. Elas geralmente t√™m um aumento de 10x."
            },
            {
                question: "Para se obter uma imagem de $1000\text{x}$ em um microsc√≥pio de luz, qual √© a objetiva necess√°ria se a ocular for de $10\text{x}$?",
                options: ["$40\text{x}$", "$60\text{x}$", "$100\text{x}$", "$50\text{x}$"],
                answer: "$100\text{x}$",
                explanation: "O aumento total ($1000\text{x}$) √© o produto do aumento da ocular ($10\text{x}$) pela objetiva. Portanto, $1000 / 10 = 100\text{x}$."
            },
            {
                question: "O ajuste fino (microm√©trico) no microsc√≥pio √© utilizado para qual finalidade?",
                options: ["Ajustar a intensidade da luz.", "Mudar a objetiva.", "Mover a l√¢mina.", "Obter a nitidez final da imagem."],
                answer: "Obter a nitidez final da imagem.",
                explanation: "O ajuste macrom√©trico √© para a focaliza√ß√£o inicial, e o ajuste microm√©trico move a platina em pequenos incrementos para garantir a m√°xima nitidez."
            },
            // 4. Histologia do Tecido Epitelial de Revestimento (4 quest√µes)
            {
                question: "Qual caracter√≠stica √© fundamental para a defini√ß√£o do tecido epitelial?",
                options: ["Ser ricamente vascularizado.", "Possuir grande quantidade de matriz extracelular.", "Ter c√©lulas muito separadas.", "Ser avascular e possuir alta coes√£o celular."],
                answer: "Ser avascular e possuir alta coes√£o celular.",
                explanation: "Epit√©lios n√£o possuem vasos sangu√≠neos (avasculares), dependendo do tecido conjuntivo subjacente para nutri√ß√£o. A alta coes√£o √© dada pelos complexos juncionais."
            },
            {
                question: "O epit√©lio do tipo 'simples pavimentoso' √© encontrado em locais onde a principal fun√ß√£o √©:",
                options: ["Prote√ß√£o contra atrito.", "Secre√ß√£o e absor√ß√£o ativa.", "Movimenta√ß√£o de fluidos.", "Troca gasosa e filtra√ß√£o r√°pida."],
                answer: "Troca gasosa e filtra√ß√£o r√°pida.",
                explanation: "Por ser uma √∫nica camada de c√©lulas achatadas, ele minimiza a barreira de difus√£o, sendo ideal para alv√©olos pulmonares (troca gasosa) e endot√©lio (filtra√ß√£o)."
            },
            {
                question: "Qual modifica√ß√£o de superf√≠cie celular √© caracter√≠stica do epit√©lio de revestimento do intestino delgado, aumentando drasticamente a √°rea de absor√ß√£o?",
                options: ["C√≠lios", "Flagelos", "Jun√ß√µes comunicantes", "Microvilosidades"],
                answer: "Microvilosidades",
                explanation: "As microvilosidades formam a 'borda em escova' no intestino e aumentam em at√© 20 vezes a √°rea de contato para absor√ß√£o de nutrientes."
            },
            {
                question: "O Urot√©lio (epit√©lio de transi√ß√£o) √© especial por qual motivo?",
                options: ["Possuir gl√¢ndulas unicelulares.", "Ser o √∫nico epit√©lio com tr√™s camadas.", "Conter queratina na superf√≠cie.", "Adaptar-se √† distens√£o da bexiga."],
                answer: "Adaptar-se √† distens√£o da bexiga.",
                explanation: "O Urot√©lio √© o epit√©lio que reveste a bexiga. Ele pode mudar de espessura e apar√™ncia (de estratificado para menos estratificado) conforme a bexiga se enche e esvazia."
            },
            // 5. Histologia do Tecido Conjuntivo Propriamente Dito (TCPD) e Componente Celular (5 quest√µes)
            {
                question: "A c√©lula mais numerosa e residente no TCPD, encarregada da produ√ß√£o da matriz extracelular, √©:",
                options: ["Plasm√≥cito", "Macr√≥fago", "Fibroblasto", "Linf√≥cito"],
                answer: "Fibroblasto",
                explanation: "Fibroblastos s√£o as principais c√©lulas do conjuntivo, sintetizando fibras de col√°geno, elastina e a subst√¢ncia fundamental. Quando inativos, s√£o chamados de fibr√≥citos."
            },
            {
                question: "Qual c√©lula do tecido conjuntivo √© uma c√©lula de defesa especializada na produ√ß√£o de anticorpos?",
                options: ["Mast√≥cito", "Macr√≥fago", "Adip√≥cito", "Plasm√≥cito"],
                answer: "Plasm√≥cito",
                explanation: "Os Plasm√≥citos se diferenciam a partir dos linf√≥citos B e s√£o respons√°veis pela s√≠ntese e secre√ß√£o de anticorpos (imunoglobulinas)."
            },
            {
                question: "No Tecido Conjuntivo, qual c√©lula libera mediadores pr√≥-inflamat√≥rios (como histamina) de seus gr√¢nulos, sendo crucial em processos al√©rgicos?",
                options: ["Fibroblasto", "Macr√≥fago", "Mast√≥cito", "C√©lula Endotelial"],
                answer: "Mast√≥cito",
                explanation: "O mast√≥cito tem gr√¢nulos que liberam histamina e outros mediadores na presen√ßa de al√©rgenos, causando rea√ß√µes imediatas de hipersensibilidade (alergia)."
            },
            {
                question: "O tecido conjuntivo frouxo √© primariamente encontrado em qual localiza√ß√£o, devido √† sua fun√ß√£o de preenchimento e suporte a epit√©lios?",
                options: ["Tend√µes e ligamentos.", "Derme profunda.", "Sob o epit√©lio (l√¢mina pr√≥pria) e ao redor de vasos.", "C√°psulas de √≥rg√£os."],
                answer: "Sob o epit√©lio (l√¢mina pr√≥pria) e ao redor de vasos.",
                explanation: "O conjuntivo frouxo √© rico em c√©lulas e subst√¢ncia fundamental, oferecendo suporte flex√≠vel e servindo como primeiro local de defesa sob os epit√©lios."
            },
            {
                question: "Qual √© o nome da principal fibra proteica, resistente √† tra√ß√£o, encontrada em abund√¢ncia no Tecido Conjuntivo Denso?",
                options: ["Fibras El√°sticas", "Fibras Musculares", "Fibras Reticulares", "Fibras Col√°genas"],
                answer: "Fibras Col√°genas",
                explanation: "As Fibras Col√°genas (principalmente tipo I) s√£o o componente estrutural que confere alta resist√™ncia √† tra√ß√£o, sendo a base do conjuntivo denso."
            }
        ];

        // VARI√ÅVEIS DE ESTADO
        let currentQuestionIndex = 0;
        let score = 0;
        let isQuestionAnswered = false;
        let studentName = ''; 
        let studentId = '';   

        // REFER√äNCIAS DOM
        const quizArea = document.getElementById('quiz-area');
        const startScreen = document.getElementById('start-screen');
        const resultScreen = document.getElementById('result-screen');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressText = document.getElementById('progress-text');
        const progressBar = document.getElementById('progress-bar');
        const nextButton = document.getElementById('next-button');
        const feedbackModal = document.getElementById('feedback-modal');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackExplanation = document.getElementById('feedback-explanation');
        const startErrorMessage = document.getElementById('start-error-message');


        // Fun√ß√µes para manipula√ß√£o do Quiz
        
        // Fun√ß√£o para validar e capturar o nome do aluno
        function handleStart() {
            const nameInput = document.getElementById('student-name').value.trim();
            const idInput = document.getElementById('student-id').value.trim();

            if (!nameInput) {
                startErrorMessage.classList.remove('hidden');
                return;
            }
            
            startErrorMessage.classList.add('hidden');
            studentName = nameInput;
            studentId = idInput;
            startQuiz();
        }

        // Fun√ß√£o para iniciar o quiz (depois de capturar os dados do aluno)
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizArea.classList.remove('hidden');
            loadQuestion();
        }

        // Fun√ß√£o para carregar a quest√£o atual
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const currentQuestion = questions[currentQuestionIndex];
            
            // Atualiza progresso
            const progress = (currentQuestionIndex / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `Progresso: Quest√£o ${currentQuestionIndex + 1} de ${questions.length}`;

            // Reset UI
            optionsContainer.innerHTML = '';
            questionText.textContent = currentQuestion.question;
            nextButton.classList.add('hidden');
            isQuestionAnswered = false;

            // Cria os bot√µes de op√ß√£o
            currentQuestion.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                // Adicionado 'data-index' para evitar quebra no teclado/touch, mas a l√≥gica de resposta est√° no clique
                button.className = 'option-button w-full text-left p-4 rounded-lg bg-gray-50 border border-gray-200 text-gray-700 font-medium transition-colors duration-200';
                button.onclick = () => checkAnswer(option, button, currentQuestion.answer, currentQuestion.explanation);
                optionsContainer.appendChild(button);
            });
        }

        // Fun√ß√£o para verificar a resposta
        function checkAnswer(selectedOption, button, correctAnswer, explanation) {
            if (isQuestionAnswered) return; // Impede m√∫ltiplos cliques
            isQuestionAnswered = true;

            const buttons = optionsContainer.querySelectorAll('button');
            buttons.forEach(btn => btn.disabled = true); // Desabilita todos os bot√µes para garantir que n√£o haja retroa√ß√£o

            let isCorrect = selectedOption === correctAnswer;

            // Aplica estilo de feedback no bot√£o
            button.classList.remove('bg-gray-50', 'border-gray-200', 'hover:bg-primary-blue/10');
            button.classList.add('font-bold');

            if (isCorrect) {
                button.classList.add('bg-correct-green', 'text-white');
                score++;
                feedbackTitle.textContent = '‚úÖ Correto!';
                feedbackTitle.classList.remove('text-wrong-red');
                feedbackTitle.classList.add('text-correct-green');
            } else {
                button.classList.add('bg-wrong-red', 'text-white');
                feedbackTitle.textContent = '‚ùå Errado!';
                feedbackTitle.classList.remove('text-correct-green');
                feedbackTitle.classList.add('text-wrong-red');
                
                // Destaca a resposta correta
                buttons.forEach(btn => {
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('border-2', 'border-correct-green', 'bg-correct-green/10', 'text-correct-green');
                    }
                });
            }

            // Exibe o feedback modal
            feedbackExplanation.textContent = `A resposta correta √©: ${correctAnswer}.\nDetalhes: ${explanation}`;
            feedbackModal.classList.remove('hidden');

            nextButton.classList.remove('hidden');
        }

        // Fun√ß√£o para fechar o modal e ir para a pr√≥xima pergunta
        function closeFeedback() {
            feedbackModal.classList.add('hidden');
            nextQuestion();
        }

        // Fun√ß√£o para avan√ßar para a pr√≥xima pergunta
        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        // Fun√ß√£o para gerar o link do WhatsApp
        function sendWhatsappResult(score, percentage, finalConcept) {
            // N√∫mero do professor (formato internacional: 55 + DDD + Telefone)
            const professorNumber = "5584994420139"; 

            let message = `*Resultado do Quiz de Histologia*\n\n`;
            message += `üë§ *Aluno(a):* ${studentName}\n`;
            if (studentId) {
                message += `üè∑Ô∏è *Matr√≠cula/Turma:* ${studentId}\n`;
            }
            message += `\nüìä *Pontua√ß√£o:* ${score}/${questions.length}\n`;
            message += `üéØ *Acertos (%):* ${percentage.toFixed(1)}%\n`;
            message += `‚≠ê *Nota Final:* ${finalConcept}\n\n`;
            message += `O quiz foi conclu√≠do e o resultado est√° anexado.`;

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://api.whatsapp.com/send?phone=${professorNumber}&text=${encodedMessage}`;
            
            // Abre o link em uma nova janela/aba
            window.open(whatsappUrl, '_blank');
        }

        // Fun√ß√£o para mostrar os resultados
        function showResults() {
            const finalProgress = (questions.length / questions.length) * 100;
            progressBar.style.width = `${finalProgress}%`;
            progressText.textContent = `Progresso: ${questions.length} de ${questions.length} (Fim)`;
            
            // C√°lculo da nota final
            const percentage = (score / questions.length) * 100;
            
            let finalConcept = '';
            let gradeColor = 'text-correct-green'; // Default para Excelente

            if (percentage >= 90) {
                finalConcept = 'Excelente (A)';
            } else if (percentage >= 70) {
                finalConcept = 'Muito Bom (B)';
                gradeColor = 'text-primary-blue';
            } else if (percentage >= 50) {
                finalConcept = 'Regular (C)';
                gradeColor = 'text-secondary-yellow';
            } else {
                finalConcept = 'Insuficiente (D)';
                gradeColor = 'text-wrong-red';
            }
            
            // Conte√∫do din√¢mico da tela de resultados
            const studentIdDisplay = studentId ? `<p class="text-md text-gray-500 mb-6">Matr√≠cula/Turma: ${studentId}</p>` : '';

            resultScreen.innerHTML = `
                <h2 class="text-4xl font-extrabold text-primary-blue mb-4">Quiz Conclu√≠do! üéâ</h2>
                <p class="text-xl text-gray-800 mb-1 font-semibold">Aluno(a): ${studentName}</p>
                ${studentIdDisplay}
                <p class="text-xl text-gray-700 mb-4">Sua pontua√ß√£o √©:</p>
                <p id="final-score-value" class="text-6xl font-black ${gradeColor} mb-2">${score}/${questions.length}</p>
                <p class="text-3xl font-bold ${gradeColor} mb-8">Nota Final: ${finalConcept} (${percentage.toFixed(1)}%)</p>
                
                <p class="text-sm text-gray-500 mb-4">Envie o resultado para o professor. Ap√≥s o envio, voc√™ n√£o poder√° fazer o quiz novamente.</p>

                <button class="px-8 py-3 bg-whatsapp-green text-white font-bold rounded-full hover:bg-whatsapp-green/90 transition-all shadow-lg flex items-center justify-center mx-auto" onclick="sendWhatsappResult(${score}, ${percentage}, '${finalConcept}')">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12.04 2c-5.54 0-10 4.49-10 10.03 0 1.77.46 3.44 1.35 4.9l-.92 3.4 3.55-.95c1.45.8 3.1 1.25 4.96 1.25 5.54 0 10-4.49 10-10.03S17.58 2 12.04 2zm5.02 14.8c-.28.14-.6.2-.9.2s-.65-.05-.97-.18c-.48-.2-.84-.52-1.22-.92-.6-.62-1.3-1.6-1.57-2.13-.27-.52-.3-.72-.5-1.02-.12-.2-.23-.27-.4-.27h-.08c-.2 0-.47.07-.72.33-.25.26-.53.58-.68.74-.15.15-.3.34-.48.47-.18.13-.38.2-.58.2s-.43-.07-.63-.2c-.19-.13-.57-.5-.95-1.07-.38-.58-.6-1.16-.76-1.42-.16-.27-.37-.5-.47-.7-.1-.18-.15-.36-.05-.53.1-.17.26-.3.4-.4.14-.1.3-.2.43-.3.13-.1.25-.17.38-.27.13-.1.2-.2.24-.26.04-.05.07-.12.07-.22 0-.1-.02-.2-.04-.3-.04-.15-.22-.52-.3-1.02-.07-.5-.14-.85-.14-1.02 0-.17.07-.3.18-.4.1-.1.2-.18.33-.28.12-.1.24-.16.38-.22.13-.06.26-.07.38-.07h.18c.24 0 .38.1.5.3.12.2.3.4.4.56.1.16.2.3.26.4.07.1.1.2.14.3.04.1.05.2.05.3 0 .1-.05.2-.14.3s-.2.2-.36.37c-.16.17-.3.35-.4.57s-.18.5-.18.8c0 .24.05.4.15.54.1.14.23.23.38.3.15.07.3.1.4.1.13 0 .27-.05.4-.1s.27-.17.4-.3c.12-.13.25-.27.38-.4.13-.13.27-.26.4-.37.28-.2.62-.36 1.05-.36.43 0 .78.16 1.05.36s.4.5.5.94c.1.44.1.88.02 1.3-.07.42-.23.8-.4 1.15z"/>
                    </svg>
                    Enviar Resultado
                </button>
            `;
            
            quizArea.classList.add('hidden');
            resultScreen.classList.remove('hidden');
        }

        // Inicializa o aplicativo
        window.onload = () => {
             // Exibe a tela de in√≠cio/cadastro por padr√£o.
        };

    </script>
</body>
</html>
